<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>指南 | GRender</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="🛠️ A lightweight canvas library for 2D.">
    <link rel="preload" href="/grender/assets/css/0.styles.c4d7e60c.css" as="style"><link rel="preload" href="/grender/assets/js/app.f4b2d0af.js" as="script"><link rel="preload" href="/grender/assets/js/3.dd1da5d1.js" as="script"><link rel="preload" href="/grender/assets/js/12.da689207.js" as="script"><link rel="preload" href="/grender/assets/js/4.99953e5c.js" as="script"><link rel="preload" href="/grender/assets/js/5.14232fc7.js" as="script"><link rel="preload" href="/grender/assets/js/6.0ff34b09.js" as="script"><link rel="preload" href="/grender/assets/js/7.74f0b091.js" as="script"><link rel="prefetch" href="/grender/assets/js/1.28429b7f.js"><link rel="prefetch" href="/grender/assets/js/10.6a232eb1.js"><link rel="prefetch" href="/grender/assets/js/11.4c4d2e6d.js"><link rel="prefetch" href="/grender/assets/js/13.2b752130.js"><link rel="prefetch" href="/grender/assets/js/8.00829120.js"><link rel="prefetch" href="/grender/assets/js/9.b15cce48.js">
    <link rel="stylesheet" href="/grender/assets/css/0.styles.c4d7e60c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/grender/" class="home-link router-link-active"><img src="/grender/logo.svg" alt="GRender" class="logo"> <span class="site-name can-hide">GRender</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/grender/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/grender/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/grender/shape/" class="nav-link">
  图形
</a></div> <a href="https://github.com/nashaofu/grender" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/grender/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/grender/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/grender/shape/" class="nav-link">
  图形
</a></div> <a href="https://github.com/nashaofu/grender" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/grender/guide.html#基本示例" class="sidebar-link">基本示例</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/grender/guide.html#图形样式" class="sidebar-link">图形样式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/grender/guide.html#图形变换" class="sidebar-link">图形变换</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/grender/guide.html#鼠标事件" class="sidebar-link">鼠标事件</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="指南"><a href="#指南" class="header-anchor">#</a> 指南</h1> <h2 id="基本示例"><a href="#基本示例" class="header-anchor">#</a> 基本示例</h2> <p>初始化画布，并添加图形</p> <div class="demo1"></div> <details class="custom-block details"><summary>点击查看代码</summary> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> GRender<span class="token punctuation">,</span> <span class="token punctuation">{</span> Rect<span class="token punctuation">,</span> Line<span class="token punctuation">,</span> Arrow<span class="token punctuation">,</span> Circle<span class="token punctuation">,</span> Ellipse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'grender'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Demo1'</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GRender</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">30</span>
    <span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        width<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x1<span class="token operator">:</span> x <span class="token operator">-</span> <span class="token number">50</span><span class="token punctuation">,</span>
        y1<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        x2<span class="token operator">:</span> x <span class="token operator">+</span> <span class="token number">50</span><span class="token punctuation">,</span>
        y2<span class="token operator">:</span> <span class="token number">160</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> arrow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Arrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x1<span class="token operator">:</span> x <span class="token operator">-</span> <span class="token number">30</span><span class="token punctuation">,</span>
        y1<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        x2<span class="token operator">:</span> x <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span>
        y2<span class="token operator">:</span> <span class="token number">160</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        r<span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> ellipse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ellipse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> x <span class="token operator">+</span> <span class="token number">60</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
        rx<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        ry<span class="token operator">:</span> <span class="token number">30</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>arrow<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ellipse<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.demo1
  height 180px
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <h2 id="图形样式"><a href="#图形样式" class="header-anchor">#</a> 图形样式</h2> <p>默认情况下，图形添加到画布中后会有默认样式，我们可以在初始化时设置图形的样式</p> <div class="demo2"></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>图形在画布中的层级关系，默认是添加到画布中的顺序，后添加的层级更高，我们也可以在初始化化时指定<code>z</code>值，从而调整某个图形的层级。
上图中我们手动指定了矩形的层级为<code>1</code>，所以它会被绘制到最上层。图形默认<code>z</code>值为<code>0</code></p></div> <details class="custom-block details"><summary>点击查看代码</summary> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> GRender<span class="token punctuation">,</span> <span class="token punctuation">{</span> Rect<span class="token punctuation">,</span> Circle<span class="token punctuation">,</span> Ellipse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'grender'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Demo2'</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GRender</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">30</span>
    <span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      brush<span class="token operator">:</span> <span class="token punctuation">{</span>
        fillStyle<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
        strokeStyle<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
        globalAlpha<span class="token operator">:</span> <span class="token number">0.9</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        width<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      z<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      brush<span class="token operator">:</span> <span class="token punctuation">{</span>
        lineWidth<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        strokeStyle<span class="token operator">:</span> <span class="token string">'blue'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        r<span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> ellipse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ellipse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      brush<span class="token operator">:</span> <span class="token punctuation">{</span>
        lineWidth<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        fillStyle<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
        globalAlpha<span class="token operator">:</span> <span class="token number">0.9</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> x <span class="token operator">+</span> <span class="token number">60</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
        rx<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        ry<span class="token operator">:</span> <span class="token number">30</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ellipse<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.demo2
  height 180px
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <h2 id="图形变换"><a href="#图形变换" class="header-anchor">#</a> 图形变换</h2> <p>图形目前支持<code>translate(移动)</code>，<code>scale(缩放)</code>和<code>rotate(旋转)</code>三种变换</p> <div class="demo3"><h5>矩形变换</h5> <button>x + 10</button> <button>y + 10</button> <button>旋转30°</button> <button>放大1.2倍</button> <button>缩小1.2倍</button> <div class="demo3-canvas"></div> <h5>椭圆变换</h5> <button>x + 10</button> <button>y + 10</button> <button>旋转30°</button> <button>放大1.2倍</button> <button>缩小1.2倍</button> <div class="demo3-canvas"></div></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>图形变换的中心点为图形为变换前的原点坐标<code>(0,0)</code>，所以定义图形形状时，尽量把图形的左上角和<code>(0，0)</code>重合，保证图形变换时以图形左上角为中心，方便编码</p></div> <details class="custom-block details"><summary>点击查看代码</summary> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">&gt;</span></span>矩形变换<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>translateX(rect)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>x + 10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>translateY(rect)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>y + 10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>rotate(rect)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>旋转30°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scale(rect, 1.2)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>放大1.2倍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scale(rect, 1 / 1.2)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>缩小1.2倍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo3-canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>rect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">&gt;</span></span>椭圆变换<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>translateX(ellipse)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>x + 10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>translateY(ellipse)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>y + 10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>rotate(ellipse)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>旋转30°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scale(ellipse, 1.2)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>放大1.2倍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scale(ellipse, 1 / 1.2)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>缩小1.2倍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo3-canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ellipse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> GRender<span class="token punctuation">,</span> <span class="token punctuation">{</span> Rect<span class="token punctuation">,</span> Ellipse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'grender'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Demo3'</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GRender</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      brush<span class="token operator">:</span> <span class="token punctuation">{</span>
        fillStyle<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
        strokeStyle<span class="token operator">:</span> <span class="token string">'red'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        width<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>grender1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rect<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>grender2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GRender</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>ellipse<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>ellipse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ellipse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      brush<span class="token operator">:</span> <span class="token punctuation">{</span>
        fillStyle<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
        strokeStyle<span class="token operator">:</span> <span class="token string">'red'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        rx<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        ry<span class="token operator">:</span> <span class="token number">30</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>grender2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ellipse<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender1<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender2<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>grender1<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>grender2<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">translateX</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> shape<span class="token punctuation">.</span><span class="token constant">T</span>
      shape<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">translateY</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> shape<span class="token punctuation">.</span><span class="token constant">T</span>
      shape<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> r <span class="token operator">=</span> shape<span class="token punctuation">.</span><span class="token constant">R</span>
      shape<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">scale</span><span class="token punctuation">(</span><span class="token parameter">shape<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> shape<span class="token punctuation">.</span><span class="token constant">S</span>
      shape<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>x <span class="token operator">*</span> val<span class="token punctuation">,</span> y <span class="token operator">*</span> val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.demo3-canvas
  height 300px
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <h2 id="鼠标事件"><a href="#鼠标事件" class="header-anchor">#</a> 鼠标事件</h2> <p>图形目前支持<code>click</code>、<code>dblclick</code>、<code>wheel</code>、<code>mousedown</code>、<code>mousemove</code>、<code>mouseup</code>、<code>mouseover</code>、<code>mouseout</code>、<code>mouseenter</code>和与<code>mouseleave</code>事件。同时也支持<code>dragstart</code>、<code>dragging</code>和<code>dragend</code>等复合事件</p> <div class="demo4"><div>当前触发事件：</div> <div class="demo4-canvas"></div></div> <details class="custom-block details"><summary>点击查看代码</summary> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>当前触发事件：{{ event }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo4-canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> GRender<span class="token punctuation">,</span> <span class="token punctuation">{</span> Rect<span class="token punctuation">,</span> Line<span class="token punctuation">,</span> Arrow<span class="token punctuation">,</span> Circle<span class="token punctuation">,</span> Ellipse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'grender'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Demo4'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      event<span class="token operator">:</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GRender</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">30</span>
    <span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        width<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      brush<span class="token operator">:</span> <span class="token punctuation">{</span>
        lineWidth<span class="token operator">:</span> <span class="token number">2</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x1<span class="token operator">:</span> x <span class="token operator">-</span> <span class="token number">50</span><span class="token punctuation">,</span>
        y1<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        x2<span class="token operator">:</span> x <span class="token operator">+</span> <span class="token number">50</span><span class="token punctuation">,</span>
        y2<span class="token operator">:</span> <span class="token number">160</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> arrow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Arrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      brush<span class="token operator">:</span> <span class="token punctuation">{</span>
        lineWidth<span class="token operator">:</span> <span class="token number">10</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x1<span class="token operator">:</span> x <span class="token operator">-</span> <span class="token number">30</span><span class="token punctuation">,</span>
        y1<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
        x2<span class="token operator">:</span> x <span class="token operator">-</span> <span class="token number">40</span><span class="token punctuation">,</span>
        y2<span class="token operator">:</span> <span class="token number">160</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        r<span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> ellipse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ellipse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      shape<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> x <span class="token operator">+</span> <span class="token number">60</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
        rx<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        ry<span class="token operator">:</span> <span class="token number">30</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>arrow<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ellipse<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span>shapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">shape</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      shape<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'dragging'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        shape<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>x<span class="token punctuation">,</span> e<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>event <span class="token operator">=</span> <span class="token string">'dragging'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      shape<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        shape<span class="token punctuation">.</span>brush<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span>
        shape<span class="token punctuation">.</span>brush<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'blue'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>event <span class="token operator">=</span> <span class="token string">'mouseenter'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">'pointer'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      shape<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        shape<span class="token punctuation">.</span>brush<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span>
        shape<span class="token punctuation">.</span>brush<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'#000'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>event <span class="token operator">=</span> <span class="token string">'mouseleave'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">'default'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resize<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">resize</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>grender<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.demo4
  border 2px solid #000
  &amp;-canvas
    height 240px
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nashaofu/grender/edit/master/docs/guide.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/20/2020, 1:06:42 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/grender/assets/js/app.f4b2d0af.js" defer></script><script src="/grender/assets/js/3.dd1da5d1.js" defer></script><script src="/grender/assets/js/12.da689207.js" defer></script><script src="/grender/assets/js/4.99953e5c.js" defer></script><script src="/grender/assets/js/5.14232fc7.js" defer></script><script src="/grender/assets/js/6.0ff34b09.js" defer></script><script src="/grender/assets/js/7.74f0b091.js" defer></script>
  </body>
</html>
